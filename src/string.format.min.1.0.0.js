(function(){"use strict";if(typeof String.prototype.format==="undefined"){var a={padLeft:function(a,b,c){a=a.toString();while(a.length<c){a=b+a}return a},padRight:function(a,b,c){a=a.toString();while(a.length<c){a=a+b}return a},extend:function(){var a=arguments,b=a[0],c,d;for(c=1;c<a.length;c+=1){for(d in a[c]){if(a[c].hasOwnProperty(d)){b[d]=a[c][d]}}}return b},count:function(a,b,c){c=c===undefined?true:c;var d=0,e;for(e=0;e<b.length;e+=1){if(c&&b[e]==="\\"){e+=2}if(a.indexOf(b[e])>-1){d+=1}}return d},regexLoop:function(a,b,c){var d;for(d=a.exec(b);d!==null;d=a.exec(b)){c(d)}},getProperties:function(a,b){var c=[],d,e;for(e in a){if(a.hasOwnProperty(e)){c.push(e)}}if(b){if(typeof b==="function"){d=b}else if(b==="length asc"){d=function(a,b){return a.length-b.length}}else if(b==="length desc"){d=function(a,b){return b.length-a.length}}c=c.sort(d)}return c}},b=function(){};b.prototype={format:function(a,b){var c,d,e,f,g,h;if(b instanceof Date){a=a.length===1&&this.dateShorts.hasOwnProperty(a)?this.dateShorts[a]:a;c=[];for(d=0;d<a.length;d+=1){if(a[d]==="\\"){c.push(a[d+1]);d+=1;continue}f=false;for(e=0;e<this.dateNames.length;e+=1){g=this.dateNames[e];if(a.substring(d,d+g.length)===g){c.push(this.date[g].apply(this,[b]));d+=g.length-1;f=true;break}}if(f){continue}c.push(a[d])}c=c.join("")}else if(!isNaN(b)){if(b instanceof Number){b=b.valueOf()}else if(typeof b==="string"){b=parseFloat(b)}h=a.match(this.numberShortRegex);if(h){c=this.numberShorts[h[1].toLowerCase()].call(this,a,b,h[2]!==undefined?parseInt(h[2],10):undefined)}else{c=this.customNumberFormat(b,a)}}return c},customNumberFormat:function(b,c){var d=[],e=[],f,g=c.indexOf("."),h=c.substring(g+1),i=g>-1?c.substring(0,g):c,j=a.count("0#",h),k=/(,+)$/g,l=i!==undefined&&i.replace(/,+$/).match(/\\?,/g),m=i!==undefined&&l&&l.indexOf(",")>-1,n=0,o,p,q,r,s,t,u,v,w,x;if(c.indexOf("%")>-1){b=b*Math.pow(100,a.count("%",c))}if(c.indexOf("‰")>-1){b=b*Math.pow(1e3,a.count("‰",c))}if(i.match(k)){v=a.count(",",/(\\|,)*$/g.exec(i)[0],true);b=b/Math.pow(1e3,v)}b=b.toString();f=b.indexOf(".");o=f>-1?b.substring(f+1):undefined;p=f>-1?b.substring(0,f):b;if(g>-1){d.push(".");for(q=0;q<h.length;q+=1){if(h[q]==="\\"){d.push(h[q+1]);q+=1}else if(h[q]==","){continue}else if(o!==undefined&&"0#".indexOf(h[q])>-1){if(n>=j-1){r=parseInt(o[n],10);if(!isNaN(r)){s=parseInt(o.substring(n+1,n+2),10);if(!isNaN(s)&&s>4){r+=1}d.push(r);n=o.length}}else if(o.length>n){d.push(o[n])}n+=1}else{d.push(h[q])}}l=h.match(/0|#/g);t=l.lastIndexOf("0")+2;t=Math.max(t,0);if(d.length<t){t=t-d.length;d.push((new Array(t+1)).join("0"))}}else if(o!==undefined){p=Math.round(b).toString()}if(parseInt(p,10)>0){q=i.length-1;w=function(a,b){var c={formatComplete:a<=-1,valueComplete:n<=-1,isEscaped:b[a-1]=="\\",isComma:b[a]==",",isLiteral:"0#,.".indexOf(b[a])===-1};return c};for(n=p.length-1;n>-1;n-=1){for(x=w(q,i);!x.formatComplete&&(x.isEscaped||x.isLiteral||x.isComma);x=w(q,i)){if(x.isEscaped){e.unshift(i[q]);q-=2}else if(!x.isLiteral||x.isComma){q-=1}else{e.unshift(i[q]);q-=1}}e.unshift(p[n]);q-=1;if(m&&n>0&&(p.length-n)%3==0){e.unshift(",")}}}if(q>-1){while(q>-1){if("#,".indexOf(i[q])==-1){e.unshift(i[q])}q-=1}}u=i.indexOf("0");u=u===-1?1:i.length-u;while(e.length<u){e.unshift("0")}return e.join("")+d.join("")},standardNumberFormat:function(b,c){c=a.extend({prefix:"",seperator:"",seperateAt:0,places:undefined,suffix:undefined,pad:undefined},c);var d=[b>0?"":"-",c.prefix],e,f,g;b=Math.abs(b);b=c.places!==undefined?parseFloat(b).toFixed(c.places):b.toString();b=c.pad?a.padLeft(b,"0",c.pad):b;if(c.seperateAt>0){e=b.lastIndexOf(".");e=e===-1?b.length:e;f=e%c.seperateAt;for(g=0;g<e;g+=1){if(g!==0&&g%c.seperateAt===f){d.push(c.seperator)}d.push(b[g])}for(g=e;g<b.length;g+=1){d.push(b[g])}}else{d.push(b)}if(c.suffix){d.push(c.suffix)}return d.join("")},numberShorts:{c:function(a,b,c){return this.standardNumberFormat(b,{prefix:"$",seperator:",",seperateAt:3,places:isNaN(c)?2:c})},d:function(a,b,c){return this.standardNumberFormat(b,{places:0,pad:c})},e:function(a,b,c){return b.toExponential(isNaN(c)?6:c).toString().toUpperCase()},f:function(a,b,c){return this.standardNumberFormat(b,{places:isNaN(c)?2:c})},g:function(a,b,c){var d,e=isNaN(c),f=b.toExponential(c).toString(),g=f.match(/[\-+]\d+$/);f=parseInt(g[0],10);if(f>-5&&(e||f<c)){d=e?b.toString():b.toPrecision(c)}else{d=b.toExponential(e?undefined:Math.max(c-1,0))}return d.toString().toUpperCase()},n:function(a,b,c){return this.standardNumberFormat(b,{seperator:",",seperateAt:3,places:isNaN(c)?2:c})},r:function(a,b,c){return b.toString()},x:function(b,c,d){var e=c>0?"":"-",f;c=Math.abs(c.toString(16));if(isNaN(c)){f=c}else{f=e+a.padLeft(c,"0",d||0)}return f}},date:{dd:function(a){return a.getDate()},ddd:function(a){return this.daysShort[a.getDay()]},dddd:function(a){return this.days[a.getDay()]},hh:function(a){var b=a.getHours();if(b>12){b-=12}return b},HH:function(a){return a.getHours()},mm:function(a){return a.getMinutes()},MM:function(a){return a.getMonth()+1},MMM:function(a){return this.monthsShort[a.getMonth()]},MMMM:function(a){return this.months[a.getMonth()]},ss:function(a){return a.getSeconds()},tt:function(a){return a.getHours()>11?"PM":"AM"},yy:function(a){return a.getFullYear().toString().substring(2)},yyyy:function(a){return a.getFullYear()},zz:function(b){var c=b.getTimezoneOffset(),d=(c>0?"-":"")+a.padLeft(Math.abs(Math.floor(c/60)),"0",2).toString();return d},zzz:function(b){var c=b.getTimezoneOffset(),d=(c>0?"-":"")+a.padLeft(Math.abs(Math.floor(c/60)),"0",2).toString()+":"+a.padLeft(c%60,"0",2);return d}},dateShorts:{d:"dd/MM/yyyy",D:"MMMM dd, yyyy",t:"hh:mm tt",T:"hh:mm:ss tt",f:"MMMM dd, yyyy hh:mm tt",F:"MMMM dd, yyyy hh:mm:ss tt",g:"dd/MM/yyyy hh:mm tt",G:"dd/MM/yyyy hh:mm:ss tt",M:"MMMM dd",r:"ddd, dd MMM yyyy hh:mm:ss GMT",s:"yyyy-MM-ddThh:mm:ss",u:"yyyy-MM-dd hh:mm:ssZ",U:"MMMM dd,yyyy hh:mm:ss tt",Y:"MMMM, yyyy"},days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};b.prototype.dateNames=function(){return a.getProperties(b.prototype.date,"length desc")}();b.prototype.numberShortRegex=function(){var c=a.getProperties(b.prototype.numberShorts,"length desc");return new RegExp("^(["+c.join("")+"])(\\d+)?$","i")}();String.prototype.format=function(){var a=this,c=[],d=[],e=0,f,g,h,i,j,k,l=function(a,b,c,d){if(c){var e;for(e=0;e<Math.abs(a)-b.length;e+=1){d.push(" ")}}};if(a.indexOf("{{")===-1&&a.indexOf("}}")-1){f=/\{(\d+)(,-?\d+)?(:.*?)?\}/gi;for(g=f.exec(a);g!==null;g=f.exec(a)){d.push({length:g[0].length,index:g[1],padding:g[2]!==undefined?parseInt(g[2].substring(1),10):0,format:g[3]!==undefined?g[3].substring(1):undefined,value:arguments[g[1]],paramAt:g.index})}}else{f=/^(\d+)(,-?\d+)?(:.*?)?$/gi;j=0;while(j>-1){h=a.indexOf("{",j);while(h!==-1&&a.substring(h,h+2)==="{{"){h=a.indexOf("{",h+2)}i=a.indexOf("}",j);while(i!==-1&&a.substring(i,i+2)==="}}"){i=a.indexOf("}",i+2)}if(h!==-1&&i!==-1){g=a.substring(h+1,i);g=f.exec(g);d.push({match:g[0].length+2,index:g[1],padding:g[2]!==undefined?parseInt(g[2].substring(1),10):0,format:g[3]!==undefined?g[3].substring(1):undefined,value:arguments[g[1]],paramAt:h})}j=a.indexOf("{",i)}}for(j=0;j<d.length;j+=1){k=d[j];if(k.paramAt>e){c.push(a.substring(e,k.paramAt));e=k.paramAt}if(k.format){k.value=(new b).format(k.format,k.value)}l(k.padding,k.value,k.padding<0,c);c.push(k.value);e+=k.length;l(k.padding,k.value,k.padding>0,c)}if(e<a.length){c.push(a.substring(e,a.length))}c=c.join("");return c};Number.prototype.format=function(a){return(new b).format(a,this)};Date.prototype.format=function(a){return(new b).format(a,this)};String.format=function(a){var b=[],c;for(c=1;c<arguments.length;c++){b.push(arguments[c])}return String.prototype.format.apply(a,b)}}})()